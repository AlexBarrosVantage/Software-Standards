<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Language" content="en">
<title>Never use the ON CHANGE OF statement</title>
<link rel="StyleSheet" href="../../style.css" type="text/css">
</head>
<body>
<h4>Never use the ON CHANGE OF statement</h4>
<hr>
<h5>Technology</h5>
<p>ABAP</p>
<h5>Unified Status</h5>
<p>N/A</p>
<h5>XXL Status</h5>
<p>N/A</p>
<h5>Critical Quality Rule</h5>
<p>No</p>
<h5>Weight in Parent Tech. Criterion</h5>
<p>9</p>
<h5>Rationale</h5>
<p>The ON CHANGE OF statement can prove dangerous and is often misunderstood. Also, troubleshooting problems created by inadequate use of ON CHANGE OF statement can often be time-consuming because such errors are very difficult to reproduce and often appear to be random ones. Indeed, the use of the
ON CHANGE OF statement is not suitable within functions or subroutines as many developers expect the comparison field&#39;s value to be reset for every new function call which is not the case. The control structure ON CHANGE OF - ENDON is not allowed in ABAP Objects, i.e. in a method.</p>
<h5>Description</h5>
<p>This metric retrieves all ABAP artifacts using the ON CHANGE OF statement.</p>
<h5>Remediation</h5>
<p>You can replace the ON CHANGE OF statements by explicitly programming the comparisons with IF statements.</p>
<h5>Reference</h5>
<p>Enhancing the Quality of ABAP Development, Meijs-Krouwels-Heulmans-Sommen, SAP Press Page 98</p>
<h5>Sample</h5>
<pre>
LOOP AT ts_invoices INTO wa_invoices
  ON CHANGE OF wa_invoices-matnr.
...
  ENDON.
ENDLOOP.
</pre>
<h5>Remediation sample</h5>
<pre>
Remediation example:

LOOP AT ts_invoices INTO wa_invoices
  IF wa_invoices-matnr NE ltp_matnr_old.
    Ltp_matnr_old = wa_invoices-matnr.
...
  ENDIF.
ENDLOOP.
</pre>
<h5>Output</h5>
<p>Associated to each ABAP Artifact with violations, the Quality Rule provides: - The number of violation patterns</p>
<h5>Total</h5>
<p>Number of ABAP Artifacts</p>
<h5>Metric ID</h5>
<p>7528</p>
<hr>
<p align="right"><a href="http://www.castsoftware.com" target="_blank"><img border="0" src="../../cast.gif" alt="CAST Website" width="174" height="21"></a></p>
</body>
</html>
