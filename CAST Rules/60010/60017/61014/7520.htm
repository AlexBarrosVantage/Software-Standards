<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Language" content="en">
<title>Avoid unchecked return code (SY-SUBRC) after OPEN SQL or READ statement</title>
<link rel="StyleSheet" href="../../../style.css" type="text/css">
</head>
<body>
<h4>Avoid unchecked return code (SY-SUBRC) after OPEN SQL or READ statement</h4>
<hr>
<h5>Technology</h5>
<p>ABAP</p>
<h5>Unified Status</h5>
<p>N/A</p>
<h5>XXL Status</h5>
<p>N/A</p>
<h5>Critical Quality Rule</h5>
<p>Yes</p>
<h5>Weight in Parent Tech. Criterion</h5>
<p>8</p>
<h5>Rationale</h5>
<p>Missing return code checks after an Open SQL statement can result in unpredictable behavior and untraceable execution errors. This is why it is extremely important to report and handle errors as soon as they occur.</p>
<h5>Description</h5>
<p>This Quality Rule retrieves all ABAP artifacts which contain Open SQL statements or READ statements and that do not check the value of the return code SY-SUBRC. However, queries containing the COUNT function in their SELECT clause are not considered as a violation.</p>
<h5>Remediation</h5>
<p>Check the system field SY-SUBRC after SQL commands, internal table commands and file-handling commands.</p>
<h5>Reference</h5>
<p>Enhancing the Quality of ABAP Development, Meijs-Krouwels-Heulmans-Sommen, SAP Press ISBN 1-59229-030-2</p>
<h5>Sample</h5>
<pre>
select date_e into zdate_e 
from zkopcor
where date_e lt p_run
      and p_doc eq &#39;TT&#39;.

&lt;statements&gt;
</pre>
<h5>Remediation sample</h5>
<pre>
select date_e into zdate_e 
from zkopcor
where date_e lt p_run and p_doc eq &#39;TT&#39;.

if sy-subrc &lt;&gt; 0.
    message e000 with text-007.
else.
    &lt;statements&gt;
endif.
</pre>
<h5>Output</h5>
<p>Associated to each ABAP Artifact with violations, the Quality Rule provides: - The number of violation patterns</p>
<h5>Total</h5>
<p>Number of ABAP Artifacts using OpenSQL queries</p>
<h5>Metric ID</h5>
<p>7520</p>
<hr>
<p align="right"><a href="http://www.castsoftware.com" target="_blank"><img border="0" src="../../../cast.gif" alt="CAST Website" width="174" height="21"></a></p>
</body>
</html>
